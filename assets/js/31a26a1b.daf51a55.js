"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5450],{8285:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>h,contentTitle:()=>l,default:()=>g,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var n=i(5893),s=i(1151);const r={},l="Adaptative Concurrency Limiter Test Report",d={id:"benckmarks/adaptative-concurrency-limiter-test-report",title:"Adaptative Concurrency Limiter Test Report",description:"Benchmark",source:"@site/docs/benckmarks/adaptative-concurrency-limiter-test-report.md",sourceDirName:"benckmarks",slug:"/benckmarks/adaptative-concurrency-limiter-test-report",permalink:"/loadshedding/docs/benckmarks/adaptative-concurrency-limiter-test-report",draft:!1,unlisted:!1,editUrl:"https://github.com/farfetch/loadhsedding/tree/main/website/docs/benckmarks/adaptative-concurrency-limiter-test-report.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Benckmarks",permalink:"/loadshedding/docs/category/benckmarks"}},h={},c=[{value:"Benchmark",id:"benchmark",level:2},{value:"Limiter",id:"limiter",level:3},{value:"TaskQueue",id:"taskqueue",level:4},{value:"Conclusion",id:"conclusion",level:3}];function x(t){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"adaptative-concurrency-limiter-test-report",children:"Adaptative Concurrency Limiter Test Report"}),"\n",(0,n.jsx)(e.h2,{id:"benchmark",children:"Benchmark"}),"\n",(0,n.jsx)(e.p,{children:"Below, it is possible to see a benchmark analysis of the concurrency control mechanism. For this test multiple scenarios were created:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Limiter_Default:"})," Directly tests the AdaptiveConcurrencyLimiter with default priority;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Limiter_RandomPriority:"})," Directly tests the AdaptiveConcurrencyLimiter with random priorities;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"LimiterMiddleware_Default:"})," Tests the ConcurrencyLimiterMiddleware that uses the AdaptiveConcurrencyLimiter with Http Requests context with default priority;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"LimiterMiddleware_RandomPriority:"})," Tests the ConcurrencyLimiterMiddleware that uses the AdaptiveConcurrencyLimiter with Http Requests context with random priorities;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TaskQueueWith1000Items_EnqueueFixedPriority:"})," Tests the TaskQueue.Enqueue pre-loaded with 1000 items and a default priority;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TaskQueueEmpty_EnqueueRandomPriority:"})," Tests the TaskQueue.Enqueue with no elements;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TaskQueueWith1000Items_EnqueueRandomPriority:"})," Tests the TaskQueue.Enqueue pre-loaded with 1000 items and random priorities;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TaskQueueWith1000Items_Dequeue:"})," Tests the TaskQueue.Dequeue pre-loaded with 1000 items;"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TaskQueue_EnqueueNewItem_LimitReached:"})," Tests the TaskQueue.Enqueue pre-loaded with 1000 items and the queue limit reached;"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:"limiter",children:"Limiter"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-ini",children:"BenchmarkDotNet=v0.13.4, OS=Windows 10 (10.0.19044.2604/21H2/November2021Update)\nIntel Core i7-10610U CPU 1.80GHz, 1 CPU, 8 logical and 4 physical cores\n.NET SDK=7.0.103\n  [Host]     : .NET 6.0.14 (6.0.1423.7309), X64 RyuJIT AVX2\n  Job-VLMTWN : .NET 6.0.14 (6.0.1423.7309), X64 RyuJIT AVX2\n\nIterationCount=10  \n"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Method"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Mean"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Error"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"StdDev"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Min"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Max"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Rank"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Completed Work Items"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Lock Contentions"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Gen0"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Allocated"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"Limiter_Default"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"354.4 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"6.22 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3.25 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"349.2 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"358.4 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"1"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.0000"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.1450"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"608 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"Limiter_RandomPriority"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"366.3 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"4.82 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2.52 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"363.6 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"369.6 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.0000"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.1450"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"608 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"LimiterMiddleware_Default"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"436.6 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"28.55 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"16.99 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"416.7 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"471.4 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.0000"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.1855"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"776 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"LimiterMiddleware_RandomPriority"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"468.7 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"6.55 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3.90 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"463.7 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"475.3 ns"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"4"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.0000"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.2027"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"848 B"})]})]})]}),"\n",(0,n.jsx)(e.h4,{id:"taskqueue",children:"TaskQueue"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-ini",children:"BenchmarkDotNet=v0.13.4, OS=Windows 10 (10.0.19044.2604/21H2/November2021Update)\nIntel Core i7-10610U CPU 1.80GHz, 1 CPU, 8 logical and 4 physical cores\n.NET SDK=7.0.103\n  [Host]     : .NET 6.0.14 (6.0.1423.7309), X64 RyuJIT AVX2\n  Job-THBOTE : .NET 6.0.14 (6.0.1423.7309), X64 RyuJIT AVX2\n\nInvocationCount=1  IterationCount=10  UnrollFactor=1  \n\n"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Method"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Mean"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Error"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"StdDev"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Min"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Max"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Rank"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Completed Work Items"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Lock Contentions"}),(0,n.jsx)(e.th,{style:{textAlign:"right"},children:"Allocated"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"TaskQueueWith1000Items_EnqueueFixedPriority"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"11.311 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3.8278 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2.2779 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"6.800 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"14.800 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"4"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"896 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"TaskQueueEmpty_EnqueueRandomPriority"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"6.700 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3.8089 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2.2666 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"4.800 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"11.800 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"896 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"TaskQueueWith1000Items_EnqueueRandomPriority"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3.650 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.3540 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.1852 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3.400 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"4.000 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"1"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"896 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"TaskQueueWith1000Items_Dequeue"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"5.500 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"1.0912 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"0.5707 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"4.600 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"6.400 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"704 B"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"TaskQueue_EnqueueNewItem_LimitReached"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"8.111 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"2.2848 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"1.3596 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"7.000 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"10.500 \u03bcs"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"3"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"-"}),(0,n.jsx)(e.td,{style:{textAlign:"right"},children:"1144 B"})]})]})]}),"\n",(0,n.jsx)(e.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,n.jsx)(e.p,{children:"In all the scenarios the time added to the execution pipeline is very small and the impact caused by the limiter and task queue can be ignored."})]})}function g(t={}){const{wrapper:e}={...(0,s.a)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(x,{...t})}):x(t)}},1151:(t,e,i)=>{i.d(e,{Z:()=>d,a:()=>l});var n=i(7294);const s={},r=n.createContext(s);function l(t){const e=n.useContext(r);return n.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function d(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:l(t.components),n.createElement(r.Provider,{value:e},t.children)}}}]);